# learn-kind

## Kind

### Installation kind
```
curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.22.0/kind-linux-amd64
chmod +x ./kind
sudo mv ./kind /usr/local/bin/kind
sudo apt-get install golang
```

### Créer un cluster
Création d'un cluster `à la volée`

```
kind create cluster
# ou
kind create cluster --name cluster-name
```
Ou via un fichier de configuration
```
kind create cluster --config clusterConfig.yaml
```

### Intéragir avec kind
Lister les clusters créés via kind
```
kind get clusters
```
Supprimer un cluster
```
kind delete cluster --name cluster-name
```

## Kubernetes

### Appliquer configuration
Appliquer la configuration d'une ressource
```
kubectl apply -f FICHIER.yaml
```
Appliquer la configuration du cluster (fichier kustomization.yaml)
```
kubectl apply -k .
```
### Les ressources
| Nom de la ressource                      | Utilité                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Pod                                      | - Les pods sont l'unité de base de Kubernetes.<br>- Ils contiennent un ou plusieurs conteneurs Docker (ou d'autres types de conteneurs) et partagent un réseau et un espace de stockage.<br>- Les pods permettent de déployer et de gérer des applications dans Kubernetes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ReplicaSet                               | - Un ReplicaSet garantit qu'un nombre spécifié de réplicas (instances) d'un pod s'exécute en permanence.<br>- Il remplace l'ancienne fonctionnalité de « replication controller ».                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Deployment                               | - Un déploiement gère la mise à l'échelle et le déploiement des pods.<br>- Il permet de déclarer l'état souhaité des applications et Kubernetes se charge de les maintenir dans cet état.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Service                                  | - Un service expose une application exécutée sur un ensemble de pods en tant que service réseau stable.<br>- Il permet de s'abstraire des adresses IP des pods en fournissant un point de communication stable vers les applications.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Ingress                                  | - L'ingress est une ressource Kubernetes qui gère l'accès externe aux services dans un cluster Kubernetes.<br>- Il agit comme une couche d'abstraction qui permet de router le trafic HTTP et HTTPS vers différents services en fonction des règles de configuration.<br>- L'ingress permet de définir des règles de routage basées sur l'hôte, le chemin URL et d'autres attributs.<br>- Il peut être utilisé avec des contrôleurs Ingress (comme NGINX Ingress Controller) pour fournir une fonctionnalité de gestion du trafic avancée, telle que la réécriture des URL, l'équilibrage de charge, etc.<br>- L'ingress est un moyen efficace de gérer l'accès aux applications web dans Kubernetes sans avoir à exposer chaque service individuellement en tant que service de type NodePort ou LoadBalancer. |
| Namespace                                | - Les namespaces fournissent une isolation virtuelle des ressources Kubernetes<br>- Ils permettent de diviser un cluster Kubernetes en plusieurs parties virtuelles distinctes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ConfigMap                                | - Les ConfigMaps permettent de séparer la configuration des conteneurs des images d'application<br>- Ils fournissent un moyen de stocker des données de configuration en dehors des images de conteneurs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Secret                                   | - Les secrets stockent des données sensibles, comme des informations d'identification ou des clés d'API, de manière sécurisée.<br>- Ils sont encodés en base64 par défaut mais peuvent également être cryptés                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| StatefulSet                              | - Un StatefulSet est utilisé pour des applications nécessitant un stockage persistant et une identité stable.<br>- Il garantit un déploiement ordonné et une identité stable pour chaque pod dans un ensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| DaemonSet                                | - Un DaemonSet garantit qu'un pod s'exécute sur chaque nœud de cluster.<br>- Il est souvent utilisé pour des tâches telles que la collecte de journaux ou le monitoring sur chaque nœud.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Job                                      | - Les Jobs sont utilisés pour des tâches à exécution unique, tels que des tâches de batch.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| CronJob                                  | - Les CronJobs permettent de programmer des tâches pour qu'elles s'exécutent périodiquement, selon une syntaxe de planification similaire à Cron.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| HorizontalPodAutoscaler (HPA)            | - Permet de modifier automatiquement le nombre de répliques de pods en fonction de l'utilisation des ressources CPU ou mémoire.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| VerticalPodAutoscaler (VPA)              | - Ajuste les limites de ressources (CPU et mémoire) pour les pods en fonction de leur utilisation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| NetworkPolicy                            | - Définit des règles pour contrôler le trafic réseau entrant et sortant des pods.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| PersistentVolume / PersistentVolumeClaim | - Utilisés pour la gestion du stockage persistant dans Kubernetes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ServiceAccount                           | - Fournit une identité pour les processus s'exécutant dans un pod.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Role / RoleBinding                       | - Utilisés pour définir les autorisations au niveau du cluster ou de l'espace de noms.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| PodDisruptionBudget                      | - Limite le nombre de pods d'une application qui peuvent être en cours d'exécution ou en cours de mise à jour en même temps.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |